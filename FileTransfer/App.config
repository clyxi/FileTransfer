<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="Dll;Configs"></probing>
    </assemblyBinding>
  </runtime>
  <log4net>

    <logger name="LogToSqlite">
      <level value="ALL"></level>
      <appender-ref ref="ADONetAppender"></appender-ref>
    </logger>
    <logger name="SendLogToSqlite">
      <level value="INFO"></level>
      <appender-ref ref="SendLogAppender"></appender-ref>
    </logger>
    <logger name="ReceiveLogToSqlite">
      <level value="INFO"></level>
      <appender-ref ref="ReceiveLogAppender"></appender-ref>
    </logger>
    <logger name="MonitorLogToSqlite">
      <level value="INFO"></level>
      <appender-ref ref="MonitorLogAppender"></appender-ref>
    </logger>
    
    <appender name="ADONetAppender" type="log4net.Appender.ADONetAppender,log4net">
      <bufferSize value="0"></bufferSize>
      <connectionType value="System.Data.SQLite.SQLiteConnection,System.Data.SQLite,Version=1.0.92.0,Culture=neutral,PublicKeyToken=db937bc2d44ff139"></connectionType>
      <connectionString value="Data Source=Database\log.db;Version=3"></connectionString>
      <commandText value="INSERT INTO ErrorLog(LogDate,LogLevel,LogMessage) VALUES(@LogDate,@LogLevel,@LogMessage)"></commandText>
      <parameter>
        <parameterName value="@LogDate"/>
        <dbType value="DateTime"/>
        <layout type="log4net.Layout.RawTimeStampLayout"/>
      </parameter>
      <parameter>
        <parameterName value="@LogLevel"/>
        <dbType value="String"/>
        <size value="10"></size>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%level" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@LogMessage"/>
        <dbType value="String"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%message" />
        </layout>
      </parameter>
    </appender>
    
    <appender name="SendLogAppender" type="log4net.Appender.ADONetAppender,log4net">
      <bufferSize value="0"></bufferSize>
      <connectionType value="System.Data.SQLite.SQLiteConnection,System.Data.SQLite,Version=1.0.92.0,Culture=neutral,PublicKeyToken=db937bc2d44ff139"></connectionType>
      <connectionString value="Data Source=Database\log.db;Version=3"></connectionString>
      <commandText value="INSERT INTO SendLog(SendDate,SendFile,SubscribeIP,SendState) VALUES(@SendDate,@SendFile,@SubscribeIP,@SendState)"></commandText>
      <parameter>
        <parameterName value="@SendDate"/>
        <dbType value="DateTime"/>
        <layout type="log4net.Layout.RawTimeStampLayout"/>
      </parameter>
      <parameter>
        <parameterName value="@SendFile"/>
        <dbType value="String"/>
        <layout type="FileTransfer.Models.CustomLogLayout">
          <conversionPattern value="%property{SendFileName}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@SubscribeIP"/>
        <dbType value="String"/>
        <size value="30"></size>
        <layout type="FileTransfer.Models.CustomLogLayout">
          <conversionPattern value="%property{SubscribeIP}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@SendState"/>
        <dbType value="String"/>
        <size value="10"></size>
        <layout type="FileTransfer.Models.CustomLogLayout">
          <conversionPattern value="%property{SendFileState}" />
        </layout>
      </parameter>
    </appender>

    <appender name="ReceiveLogAppender" type="log4net.Appender.ADONetAppender,log4net">
      <bufferSize value="0"></bufferSize>
      <connectionType value="System.Data.SQLite.SQLiteConnection,System.Data.SQLite,Version=1.0.92.0,Culture=neutral,PublicKeyToken=db937bc2d44ff139"></connectionType>
      <connectionString value="Data Source=Database\log.db;Version=3"></connectionString>
      <commandText value="INSERT INTO ReceiveLog(ReceiveDate,ReceiveFile,MonitorIP,MonitorDirectory,ReceiveState) VALUES(@ReceiveDate,@ReceiveFile,@MonitorIP,@MonitorDirectory,@ReceiveState)"></commandText>
      <parameter>
        <parameterName value="@ReceiveDate"/>
        <dbType value="DateTime"/>
        <layout type="log4net.Layout.RawTimeStampLayout"/>
      </parameter>
      <parameter>
        <parameterName value="@ReceiveFile"/>
        <dbType value="String"/>
        <layout type="FileTransfer.Models.CustomLogLayout">
          <conversionPattern value="%property{ReceiveFileName}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@MonitorIP"/>
        <dbType value="String"/>
        <size value="30"></size>
        <layout type="FileTransfer.Models.CustomLogLayout">
          <conversionPattern value="%property{MonitorIP}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@MonitorDirectory"/>
        <dbType value="String"/>
        <layout type="FileTransfer.Models.CustomLogLayout">
          <conversionPattern value="%property{MonitorDirectory}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@ReceiveState"/>
        <dbType value="String"/>
        <size value="10"></size>
        <layout type="FileTransfer.Models.CustomLogLayout">
          <conversionPattern value="%property{ReceiveFileState}" />
        </layout>
      </parameter>
    </appender>

    <appender name="MonitorLogAppender" type="log4net.Appender.ADONetAppender,log4net">
      <bufferSize value="0"></bufferSize>
      <connectionType value="System.Data.SQLite.SQLiteConnection,System.Data.SQLite,Version=1.0.92.0,Culture=neutral,PublicKeyToken=db937bc2d44ff139"></connectionType>
      <connectionString value="Data Source=Database\log.db;Version=3"></connectionString>
      <commandText value="INSERT INTO MonitorLog(MonitorDate,ChangedFile) VALUES(@MonitorDate,@ChangedFile)"></commandText>
      <parameter>
        <parameterName value="@MonitorDate"/>
        <dbType value="DateTime"/>
        <layout type="log4net.Layout.RawTimeStampLayout"/>
      </parameter>
      <parameter>
        <parameterName value="@ChangedFile"/>
        <dbType value="String"/>
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%message" />
        </layout>
      </parameter>
    </appender>

  </log4net>
</configuration>